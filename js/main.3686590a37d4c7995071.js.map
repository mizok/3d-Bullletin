{"version":3,"sources":["webpack://webpack_playground/webpack/runtime/chunk loaded","webpack://webpack_playground/./src/ts/class/base.ts","webpack://webpack_playground/./src/ts/class/camera.ts","webpack://webpack_playground/./src/ts/class/dom-cube.ts","webpack://webpack_playground/./src/ts/class/env.ts","webpack://webpack_playground/./src/ts/class/playground.ts","webpack://webpack_playground/./src/ts/class/renderer.ts","webpack://webpack_playground/./src/ts/dom/chat.ts","webpack://webpack_playground/./src/ts/dom/clock.ts","webpack://webpack_playground/./src/ts/dom/index.ts","webpack://webpack_playground/./src/ts/dom/lib/function.ts","webpack://webpack_playground/./src/ts/dom/lib/service.ts","webpack://webpack_playground/./src/ts/dom/music.ts","webpack://webpack_playground/./src/ts/dom/space-inavader.ts","webpack://webpack_playground/./src/ts/main.ts","webpack://webpack_playground/./src/ts/mesh/cube.ts","webpack://webpack_playground/./src/ts/mesh/index.ts","webpack://webpack_playground/./src/ts/resource/index.ts","webpack://webpack_playground/./src/ts/resource/textures.ts","webpack://webpack_playground/./src/ts/util/event-emitter.ts","webpack://webpack_playground/./src/ts/util/index.ts","webpack://webpack_playground/./src/ts/util/sizer.ts","webpack://webpack_playground/./src/ts/util/ticker.ts","webpack://webpack_playground/webpack/bootstrap","webpack://webpack_playground/webpack/runtime/define property getters","webpack://webpack_playground/webpack/runtime/global","webpack://webpack_playground/webpack/runtime/hasOwnProperty shorthand","webpack://webpack_playground/webpack/runtime/make namespace object","webpack://webpack_playground/webpack/runtime/node module decorator","webpack://webpack_playground/webpack/runtime/jsonp chunk loading","webpack://webpack_playground/webpack/startup"],"names":["deferred","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","Object","defineProperty","exports","Base","renderer_1","require","camera_1","util_1","three_1","resource_1","playground_1","rotationLocked","loginStatus","canvas","domCanvas","domBundle","sizer","Sizer","scene","Scene","scene2","ticker","Ticker","camera","Camera","renderer","Renderer","playground","Playground","touched","touchedReactDelay","initResizeMechanic","initTickMechanic","initTouchMechanic","prototype","_this","on","resize","clock","delta","getDelta","update","timeout","startLocation","Vector2","endLocation","cbStart","x","clientX","clientY","cbEnd","delay","distanceTo","clearTimeout","setTimeout","addEventListener","setRotationLock","status","getRotationLockStatus","setLoginStatus","getLoginStatus","getResources","_a","_b","resources","OrbitControls_js_1","base","bestPoint","Vector3","minimunDrawbackAngle","Math","PI","setInstance","setControls","PerspectiveCamera","width","height","position","set","z","instance","add","controls","OrbitControls","enableDamping","enableZoom","enablePan","aspect","updateProjectionMatrix","DomCube","dom_1","space_inavader_1","gsap_1","clock_1","function_1","music_1","groupOuter","Group","groupInner","init","chat","Chat","Clock","music","Music","spaceInvader","SpaceInvader","scale","cubeLikeConfig","initialScale","rotation","initialRotation","object","doAnimation","default","to","startAnimationInnerRotationConfig","startAnimationInnerScalingConfig","showChat","showChatAnimationInnerRotationConfig","angle","getTargetAngle","duration","updateParameter","Env","setLights","setAmbientLight","setDirectionalLight","setBackground","directionalLight","DirectionalLight","castShadow","shadow","mapSize","normalBias","ambientLight","AmbientLight","background","gradientCubeTexture","extendStatics","__extends","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","String","__","constructor","create","env_1","mesh_1","dom_cube_1","_super","ready","env","cube","Cube","domCube","trigger","showScreen","EventEmitter","CSS3DRenderer_1","setInstances","WebGLRenderer","antialias","physicallyCorrectLights","toneMappingExposure","shadowMap","enabled","type","PCFSoftShadowMap","setClearColor","instance2","CSS3DRenderer","element","sizing","setSize","setPixelRatio","pixelRatio","render","offset","pos","normal","cNormal","cPos","m4","Matrix4","setElement","querySelector","chatMainInner","loginGuide","guestList","loginGuideBtn","CSS3DObject","bindElementEvents","target","hideClass","classList","remove","filter","val","forEach","unchosen","refreshGuestList","list","containerEle","innerHTML","total","guest","index","item","concat","username","setGuestNumber","data","updateOcclude","initClock","updateClock","now","Date","sec","getSeconds","min","getMinutes","hou","getHours","mo","getMonth","dy","getDate","yr","getFullYear","tags","corr","pad","i","toString","timer","setInterval","bind","__createBinding","o","m","k","k2","undefined","enumerable","get","__exportStar","createElementFromHTML","faceType","box","mesh","copy","applyMatrix3","normalMatrix","applyMatrix4","multiplyMatrices","matrixWorldInverse","matrixWorld","negate","dot","style","visibility","l","r","showChatAnimationOuterRotationConfig","htmlString","div","document","createElement","trim","firstChild","remain","minor","major","doAlert","doConfirm","template","cusRes","frame","prm","res","rej","confirm","cb","preventDefault","getAttribute","currentTarget","removeEventListener","cvs","dcvs","base_1","socket_io_client_1","lodash_1","service_1","Main","wrapper","chatBlock","rotationLock","chatBlockActive","path","initChatUI","toggleRotationLockFromUI","setRotationLockFromUI","toggler","loginBtn","sendBtn","logoutBtn","showTarget","myName","socket","io","initChatSocket","emit","sendMessage","evt","keyCode","checkIn","userCount","users","checkOut","showMessage","loginWrapper","inputEle","message","html","ele","containerMain","containerCube","appendChild","cloneNode","parentElement","scrollTop","scrollHeight","setModel","createRoundedBoxGeo","depth","radius0","smoothness","shape","Shape","eps","radius","faceRadius","absarc","geometry","ExtrudeGeometry","bevelEnabled","bevelSegments","steps","bevelSize","bevelThickness","curveSegments","center","geo","mat","MeshMatcapMaterial","matcap","cubeMatcap","group","Mesh","textures_1","textureLoader","TextureLoader","cubeTextureLoader","CubeTextureLoader","getTexture","source","load","texture","name","content","getCubeTexture","paths","error","console","log","promiseArr","_i","textureSources_1","textureSources","textureSource","all","values","sourceObj","callbacks","_names","callback","warn","resolveNames","_name","resolveName","namespace","off","keys","_args","finalResult","args","nameArray","names","replace","split","newName","parts","original","window","devicePixelRatio","initSizingMechanic","rect","getBoundingClientRect","event_emitter_1","requestAnimationFrame","tick","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","id","loaded","__webpack_modules__","O","chunkIds","fn","priority","notFulfilled","Infinity","j","every","key","splice","definition","globalThis","Function","obj","prop","toStringTag","nmd","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"mappings":"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","file":"js/main.3686590a37d4c7995071.js","sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tresult = fn();\n\t\t}\n\t}\n\treturn result;\n};","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Base = void 0;\r\nvar renderer_1 = require(\"./renderer\");\r\nvar camera_1 = require(\"./camera\");\r\nvar util_1 = require(\"../util\");\r\nvar three_1 = require(\"three\");\r\nvar resource_1 = require(\"../resource\");\r\nvar playground_1 = require(\"./playground\");\r\nvar rotationLocked = false;\r\nvar loginStatus = false;\r\nvar Base = /** @class */ (function () {\r\n    function Base(canvas, domCanvas, domBundle) {\r\n        this.canvas = canvas;\r\n        this.domCanvas = domCanvas;\r\n        this.domBundle = domBundle;\r\n        this.sizer = new util_1.Sizer(this.canvas);\r\n        this.scene = new three_1.Scene();\r\n        this.scene2 = new three_1.Scene();\r\n        this.ticker = new util_1.Ticker();\r\n        this.camera = new camera_1.Camera(this);\r\n        this.renderer = new renderer_1.Renderer(this);\r\n        this.playground = new playground_1.Playground(this);\r\n        this.touched = false;\r\n        this.touchedReactDelay = 2000;\r\n        this.initResizeMechanic();\r\n        this.initTickMechanic();\r\n        this.initTouchMechanic();\r\n    }\r\n    Base.prototype.initResizeMechanic = function () {\r\n        var _this = this;\r\n        this.sizer.on('resize', function () {\r\n            _this.renderer.resize();\r\n            _this.camera.resize();\r\n        });\r\n    };\r\n    Base.prototype.initTickMechanic = function () {\r\n        var _this = this;\r\n        this.ticker.on('tick', function (clock) {\r\n            var delta = clock.getDelta();\r\n            _this.renderer.update();\r\n            _this.camera.update();\r\n            _this.playground.update(delta);\r\n        });\r\n    };\r\n    Base.prototype.initTouchMechanic = function () {\r\n        var _this = this;\r\n        var startLocation = new three_1.Vector2();\r\n        var endLocation = new three_1.Vector2();\r\n        var timeout;\r\n        var cbStart = function (e) {\r\n            startLocation.x = e.clientX;\r\n            startLocation.y = e.clientY;\r\n            _this.touched = true;\r\n        };\r\n        var cbEnd = function (e) {\r\n            endLocation.x = e.clientX;\r\n            endLocation.y = e.clientY;\r\n            var delay = startLocation.distanceTo(endLocation) > 5 ? _this.touchedReactDelay : 0;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(function () {\r\n                _this.touched = false;\r\n            }, delay);\r\n        };\r\n        this.domCanvas.addEventListener('mousedown', cbStart);\r\n        this.domCanvas.addEventListener('touchstart', cbStart);\r\n        this.domCanvas.addEventListener('mouseup', cbEnd);\r\n        this.domCanvas.addEventListener('touchend', cbEnd);\r\n        this.domCanvas.addEventListener('mouseleave', cbEnd);\r\n    };\r\n    Base.prototype.setRotationLock = function (status) {\r\n        rotationLocked = status;\r\n    };\r\n    Base.prototype.getRotationLockStatus = function () {\r\n        return rotationLocked;\r\n    };\r\n    Base.prototype.setLoginStatus = function (status) {\r\n        loginStatus = status;\r\n    };\r\n    Base.prototype.getLoginStatus = function () {\r\n        return loginStatus;\r\n    };\r\n    Base.prototype.getResources = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = this;\r\n                        return [4 /*yield*/, (0, resource_1.getResources)()];\r\n                    case 1:\r\n                        _a.resources = _b.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return Base;\r\n}());\r\nexports.Base = Base;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Camera = void 0;\r\nvar three_1 = require(\"three\");\r\nvar OrbitControls_js_1 = require(\"three/examples/jsm/controls/OrbitControls.js\");\r\nvar Camera = /** @class */ (function () {\r\n    function Camera(base) {\r\n        this.base = base;\r\n        this.bestPoint = new three_1.Vector3(-8, 1, 5.6);\r\n        this.minimunDrawbackAngle = Math.PI / 3;\r\n        this.sizer = this.base.sizer;\r\n        this.canvas = this.base.domCanvas;\r\n        this.scene = this.base.scene;\r\n        this.setInstance();\r\n        this.setControls();\r\n    }\r\n    Camera.prototype.setInstance = function () {\r\n        var camera = new three_1.PerspectiveCamera(35, this.sizer.width / this.sizer.height, 0.1, 100);\r\n        camera.position.set(this.bestPoint.x, this.bestPoint.y, this.bestPoint.z);\r\n        this.instance = camera;\r\n        this.scene.add(this.instance);\r\n        // //@ts-ignore\r\n        // window.cm = camera;\r\n    };\r\n    Camera.prototype.setControls = function () {\r\n        this.controls = new OrbitControls_js_1.OrbitControls(this.instance, this.canvas);\r\n        this.controls.enableDamping = true;\r\n        this.controls.enableZoom = false;\r\n        this.controls.enablePan = false;\r\n    };\r\n    Camera.prototype.resize = function () {\r\n        this.instance.aspect = this.sizer.width / this.sizer.height;\r\n        this.instance.updateProjectionMatrix();\r\n    };\r\n    Camera.prototype.update = function () {\r\n        this.controls.update();\r\n    };\r\n    return Camera;\r\n}());\r\nexports.Camera = Camera;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DomCube = void 0;\r\nvar three_1 = require(\"three\");\r\nvar dom_1 = require(\"../dom\");\r\nvar space_inavader_1 = require(\"../dom/space-inavader\");\r\nvar gsap_1 = require(\"gsap\");\r\nvar clock_1 = require(\"../dom/clock\");\r\nvar function_1 = require(\"../dom/lib/function\");\r\nvar music_1 = require(\"../dom/music\");\r\nvar DomCube = /** @class */ (function () {\r\n    function DomCube(base) {\r\n        this.base = base;\r\n        this.groupOuter = new three_1.Group();\r\n        this.groupInner = new three_1.Group();\r\n        this.init();\r\n    }\r\n    DomCube.prototype.init = function () {\r\n        var _a, _b;\r\n        this.chat = new dom_1.Chat(this.base);\r\n        this.clock = new clock_1.Clock(this.base);\r\n        this.music = new music_1.Music(this.base);\r\n        this.spaceInvader = new space_inavader_1.SpaceInvader(this.base);\r\n        (_a = this.groupInner.scale).set.apply(_a, function_1.cubeLikeConfig.initialScale);\r\n        (_b = this.groupInner.rotation).set.apply(_b, function_1.cubeLikeConfig.initialRotation);\r\n        this.groupInner.add(this.chat.object);\r\n        this.groupInner.add(this.clock.object);\r\n        this.groupInner.add(this.music.object);\r\n        this.groupInner.add(this.spaceInvader.object);\r\n        this.groupOuter.add(this.groupInner);\r\n        this.base.scene2.add(this.groupOuter);\r\n        this.doAnimation();\r\n    };\r\n    DomCube.prototype.doAnimation = function () {\r\n        gsap_1.default.to(this.groupInner.rotation, function_1.cubeLikeConfig.startAnimationInnerRotationConfig);\r\n        gsap_1.default.to(this.groupInner.scale, function_1.cubeLikeConfig.startAnimationInnerScalingConfig);\r\n    };\r\n    DomCube.prototype.showChat = function () {\r\n        gsap_1.default.to(this.groupInner.rotation, function_1.cubeLikeConfig.showChatAnimationInnerRotationConfig);\r\n        var angle = (0, function_1.getTargetAngle)(this.groupOuter.rotation.y);\r\n        gsap_1.default.to(this.groupOuter.rotation, {\r\n            x: 0,\r\n            y: angle,\r\n            z: 0,\r\n            duration: 2\r\n        });\r\n    };\r\n    DomCube.prototype.update = function (delta) {\r\n        if (!this.base.touched && !this.base.getRotationLockStatus()) {\r\n            this.groupOuter.rotation.y += delta / function_1.cubeLikeConfig.updateParameter;\r\n        }\r\n        this.chat.update();\r\n        this.clock.update();\r\n        this.music.update();\r\n        this.spaceInvader.update();\r\n    };\r\n    return DomCube;\r\n}());\r\nexports.DomCube = DomCube;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Env = void 0;\r\nvar three_1 = require(\"three\");\r\nvar Env = /** @class */ (function () {\r\n    function Env(base) {\r\n        this.base = base;\r\n        this.setLights();\r\n    }\r\n    Env.prototype.setLights = function () {\r\n        this.setAmbientLight();\r\n        this.setDirectionalLight();\r\n        this.setBackground();\r\n    };\r\n    Env.prototype.setDirectionalLight = function () {\r\n        this.directionalLight = new three_1.DirectionalLight(0xffffff, 1);\r\n        this.directionalLight.castShadow = true;\r\n        this.directionalLight.shadow.mapSize.set(2048, 2048);\r\n        this.directionalLight.shadow.normalBias = 0.05;\r\n        this.directionalLight.position.set(3.5, 2, -1.25);\r\n        this.base.scene.add(this.directionalLight);\r\n    };\r\n    Env.prototype.setAmbientLight = function () {\r\n        this.ambientLight = new three_1.AmbientLight(0xffffff, 1);\r\n        this.base.scene.add(this.ambientLight);\r\n    };\r\n    Env.prototype.setBackground = function () {\r\n        this.base.scene.background = this.base.resources.gradientCubeTexture;\r\n    };\r\n    Env.prototype.update = function (delta) {\r\n    };\r\n    return Env;\r\n}());\r\nexports.Env = Env;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Playground = void 0;\r\nvar env_1 = require(\"./env\");\r\nvar mesh_1 = require(\"../mesh\");\r\nvar dom_cube_1 = require(\"./dom-cube\");\r\nvar util_1 = require(\"../util\");\r\nvar Playground = /** @class */ (function (_super) {\r\n    __extends(Playground, _super);\r\n    function Playground(base) {\r\n        var _this = _super.call(this) || this;\r\n        _this.base = base;\r\n        _this.ready = false;\r\n        _this.init();\r\n        return _this;\r\n    }\r\n    Playground.prototype.init = function () {\r\n        var _this = this;\r\n        this.base.getResources().then(function () {\r\n            _this.env = new env_1.Env(_this.base);\r\n            _this.cube = new mesh_1.Cube(_this.base);\r\n            _this.domCube = new dom_cube_1.DomCube(_this.base);\r\n            _this.ready = true;\r\n            _this.trigger('ready');\r\n        });\r\n    };\r\n    Playground.prototype.showChat = function () {\r\n        this.cube.showChat();\r\n        this.domCube.showChat();\r\n        if (this.base.getLoginStatus()) {\r\n            this.domCube.chat.showScreen('guestList');\r\n        }\r\n        else {\r\n            this.domCube.chat.showScreen('loginGuide');\r\n        }\r\n    };\r\n    Playground.prototype.update = function (delta) {\r\n        if (this.ready) {\r\n            this.env.update(delta);\r\n            this.cube.update(delta);\r\n            this.domCube.update(delta);\r\n        }\r\n    };\r\n    return Playground;\r\n}(util_1.EventEmitter));\r\nexports.Playground = Playground;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Renderer = void 0;\r\nvar three_1 = require(\"three\");\r\nvar CSS3DRenderer_1 = require(\"three/examples/jsm/renderers/CSS3DRenderer\");\r\nvar Renderer = /** @class */ (function () {\r\n    function Renderer(base) {\r\n        this.base = base;\r\n        this.sizer = this.base.sizer;\r\n        this.canvas = this.base.canvas;\r\n        this.domCanvas = this.base.domCanvas;\r\n        this.scene = this.base.scene;\r\n        this.scene2 = this.base.scene2;\r\n        this.camera = this.base.camera;\r\n        this.setInstances();\r\n    }\r\n    Renderer.prototype.setInstances = function () {\r\n        //instance\r\n        this.instance = new three_1.WebGLRenderer({\r\n            canvas: this.canvas,\r\n            antialias: true\r\n        });\r\n        this.instance.physicallyCorrectLights = true;\r\n        this.instance.toneMappingExposure = 1.75;\r\n        this.instance.shadowMap.enabled = true;\r\n        this.instance.shadowMap.type = three_1.PCFSoftShadowMap;\r\n        this.instance.setClearColor(0xffffff);\r\n        //instance2\r\n        this.instance2 = new CSS3DRenderer_1.CSS3DRenderer({\r\n            element: this.domCanvas\r\n        });\r\n        this.sizing();\r\n    };\r\n    Renderer.prototype.resize = function () {\r\n        this.sizing();\r\n    };\r\n    Renderer.prototype.sizing = function () {\r\n        //instance\r\n        this.instance.setSize(this.sizer.width, this.sizer.height);\r\n        this.instance.setPixelRatio(this.sizer.pixelRatio);\r\n        //instance2\r\n        this.instance2.setSize(this.sizer.width, this.sizer.height);\r\n    };\r\n    Renderer.prototype.update = function () {\r\n        this.instance.render(this.scene, this.camera.instance);\r\n        this.instance2.render(this.scene2, this.camera.instance);\r\n    };\r\n    return Renderer;\r\n}());\r\nexports.Renderer = Renderer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Chat = void 0;\r\nvar three_1 = require(\"three\");\r\nvar CSS3DRenderer_1 = require(\"three/examples/jsm/renderers/CSS3DRenderer\");\r\nvar util_1 = require(\"../util\");\r\nvar function_1 = require(\"./lib/function\");\r\nvar Chat = /** @class */ (function (_super) {\r\n    __extends(Chat, _super);\r\n    function Chat(base) {\r\n        var _this = _super.call(this) || this;\r\n        _this.base = base;\r\n        _this.offset = 1.7;\r\n        _this.pos = new three_1.Vector3(0, 0, _this.offset);\r\n        _this.normal = new three_1.Vector3(0, 0, 1);\r\n        _this.cNormal = new three_1.Vector3();\r\n        _this.cPos = new three_1.Vector3();\r\n        _this.m4 = new three_1.Matrix4();\r\n        _this.setElement();\r\n        return _this;\r\n    }\r\n    Chat.prototype.setElement = function () {\r\n        this.element = this.base.domBundle.querySelector('#chat-main-cube');\r\n        this.chatMainInner = this.element.querySelector('#chat-main-inner');\r\n        this.loginGuide = this.element.querySelector('#login-guide');\r\n        this.guestList = this.element.querySelector('#guest-list');\r\n        this.loginGuideBtn = this.element.querySelector('#login-guide-button');\r\n        this.object = new CSS3DRenderer_1.CSS3DObject(this.element);\r\n        this.object.position.set(0, 0, this.offset);\r\n        this.object.scale.set(1 / 160, 1 / 160, 1);\r\n        this.bindElementEvents();\r\n    };\r\n    Chat.prototype.showScreen = function (target) {\r\n        var _this = this;\r\n        var hideClass = 'chat-main__inner--hide';\r\n        var targets = ['chatMainInner', 'loginGuide', 'guestList'];\r\n        this[target].classList.remove(hideClass);\r\n        targets.filter(function (val) { return val !== target; }).forEach(function (unchosen) {\r\n            var _a;\r\n            (_a = _this[unchosen]) === null || _a === void 0 ? void 0 : _a.classList.add(hideClass);\r\n        });\r\n    };\r\n    Chat.prototype.refreshGuestList = function (list) {\r\n        var containerEle = this.guestList.querySelector('#guest-list-container');\r\n        containerEle.innerHTML = '';\r\n        var total = '';\r\n        var transitionGap = 200;\r\n        list.forEach(function (guest, index) {\r\n            var item = \"\\n           <li class=\\\"guest-list__li guest\\\" style=\\\"animation-delay:\".concat(transitionGap * index, \"ms\\\">\\n                <div class=\\\"guest__name\\\">\").concat(guest.username, \"</div>\\n            </li>\\n            \");\r\n            total += item;\r\n        });\r\n        containerEle.innerHTML = total;\r\n    };\r\n    Chat.prototype.bindElementEvents = function () {\r\n        var _this = this;\r\n        this.loginGuideBtn.addEventListener('pointerdown', function () {\r\n            _this.trigger('cube-login-button-click');\r\n        });\r\n    };\r\n    Chat.prototype.setGuestNumber = function (data) {\r\n        var containerEle = this.guestList.querySelector('#guest-number');\r\n        containerEle.innerHTML = \"NOW ONLINE: \".concat(data);\r\n    };\r\n    Chat.prototype.update = function () {\r\n        (0, function_1.updateOcclude)(this);\r\n    };\r\n    return Chat;\r\n}(util_1.EventEmitter));\r\nexports.Chat = Chat;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Clock = void 0;\r\nvar three_1 = require(\"three\");\r\nvar CSS3DRenderer_1 = require(\"three/examples/jsm/renderers/CSS3DRenderer\");\r\nvar function_1 = require(\"./lib/function\");\r\nvar Clock = /** @class */ (function () {\r\n    function Clock(base) {\r\n        this.base = base;\r\n        this.offset = 1.7;\r\n        this.pos = new three_1.Vector3(-this.offset, 0, 0);\r\n        this.normal = new three_1.Vector3(-1, 0, 0);\r\n        this.cNormal = new three_1.Vector3();\r\n        this.cPos = new three_1.Vector3();\r\n        this.m4 = new three_1.Matrix4();\r\n        this.setElement();\r\n    }\r\n    Clock.prototype.setElement = function () {\r\n        this.element = this.base.domBundle.querySelector('#clock');\r\n        this.object = new CSS3DRenderer_1.CSS3DObject(this.element);\r\n        this.object.position.set(-this.offset, 0, 0);\r\n        this.object.rotation.y = -Math.PI / 2;\r\n        this.object.scale.set(1 / 160, 1 / 160, 1);\r\n        this.initClock();\r\n    };\r\n    Clock.prototype.updateClock = function () {\r\n        var now = new Date();\r\n        var sec = now.getSeconds(), min = now.getMinutes(), hou = now.getHours(), mo = now.getMonth(), dy = now.getDate(), yr = now.getFullYear();\r\n        var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n        var tags = [\"mon\", \"d\", \"y\", \"h\", \"m\", \"s\"], corr = [months[mo], dy, yr, (0, function_1.pad)(hou, 2), (0, function_1.pad)(min, 2), (0, function_1.pad)(sec, 2)];\r\n        for (var i = 0; i < tags.length; i++)\r\n            this.element.querySelector(\"#\".concat(tags[i])).innerHTML = corr[i].toString();\r\n    };\r\n    Clock.prototype.initClock = function () {\r\n        this.updateClock(); //先執行一次避免開場有破綻\r\n        this.timer = setInterval(this.updateClock.bind(this), 1000);\r\n    };\r\n    Clock.prototype.update = function () {\r\n        (0, function_1.updateOcclude)(this);\r\n    };\r\n    return Clock;\r\n}());\r\nexports.Clock = Clock;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./chat\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getTargetAngle = exports.createElementFromHTML = exports.cubeLikeConfig = exports.pad = exports.updateOcclude = void 0;\r\nfunction updateOcclude(faceType) {\r\n    var box = faceType.base.playground.cube.mesh;\r\n    faceType.cNormal.copy(faceType.normal).applyMatrix3(box.normalMatrix);\r\n    faceType.cPos.copy(faceType.pos).applyMatrix4(faceType.m4.multiplyMatrices(faceType.base.camera.instance.matrixWorldInverse, box.matrixWorld));\r\n    var d = faceType.cPos.negate().dot(faceType.cNormal);\r\n    faceType.element.style.visibility = d < 0 ? \"hidden\" : \"visible\";\r\n}\r\nexports.updateOcclude = updateOcclude;\r\nfunction pad(n, l) {\r\n    for (var r = n.toString(); r.length < l; r = 0 + r)\r\n        ;\r\n    return r;\r\n}\r\nexports.pad = pad;\r\nexports.cubeLikeConfig = {\r\n    initialScale: [0, 0, 0],\r\n    initialRotation: [Math.PI / 3, -Math.PI / 3, Math.PI / 3],\r\n    startAnimationInnerRotationConfig: {\r\n        x: 0,\r\n        y: Math.PI / 4,\r\n        z: 0,\r\n        duration: 2\r\n    },\r\n    startAnimationInnerScalingConfig: {\r\n        x: 1,\r\n        y: 1,\r\n        z: 1,\r\n        duration: 2\r\n    },\r\n    showChatAnimationInnerRotationConfig: {\r\n        x: 0,\r\n        y: -Math.PI / 4,\r\n        z: 0,\r\n        duration: 2\r\n    },\r\n    showChatAnimationOuterRotationConfig: {\r\n        x: 0,\r\n        y: 0,\r\n        z: 0,\r\n        duration: 2\r\n    },\r\n    updateParameter: 5\r\n};\r\nfunction createElementFromHTML(htmlString) {\r\n    var div = document.createElement('div');\r\n    div.innerHTML = htmlString.trim();\r\n    // Change this to div.childNodes to support multiple top-level nodes.\r\n    return div.firstChild;\r\n}\r\nexports.createElementFromHTML = createElementFromHTML;\r\nfunction getTargetAngle(angle) {\r\n    var remain = angle % (2 * Math.PI);\r\n    var minor = angle - remain - 0.25 * Math.PI;\r\n    var major = angle + ((7 * Math.PI / 4) - remain);\r\n    var newAngle = remain < Math.PI ? minor : major;\r\n    return newAngle;\r\n}\r\nexports.getTargetAngle = getTargetAngle;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.doAlert = exports.doConfirm = void 0;\r\nfunction doConfirm(template) {\r\n    var frame = document.querySelector('#modal-confirm');\r\n    var cusRes;\r\n    var prm = new Promise(function (res, rej) {\r\n        cusRes = res;\r\n    });\r\n    var confirm = false;\r\n    var cb = function (e) {\r\n        e.preventDefault();\r\n        switch (e.target.getAttribute('option')) {\r\n            case 'yes':\r\n                confirm = true;\r\n                frame.classList.remove('modal--active');\r\n                break;\r\n            case 'no':\r\n                confirm = false;\r\n                frame.classList.remove('modal--active');\r\n                break;\r\n            case 'close':\r\n                frame.classList.remove('modal--active');\r\n                break;\r\n        }\r\n        e.currentTarget.removeEventListener('click', cb);\r\n        cusRes(confirm);\r\n    };\r\n    frame.querySelector('p').innerHTML = template;\r\n    //show frame;\r\n    frame.classList.add('modal--active');\r\n    frame.addEventListener('click', cb);\r\n    return prm;\r\n}\r\nexports.doConfirm = doConfirm;\r\nfunction doAlert(template) {\r\n    var frame = document.querySelector('#modal-alert');\r\n    var cb = function (e) {\r\n        e.preventDefault();\r\n        var option = e.target.getAttribute('option');\r\n        if (option === 'close') {\r\n            e.currentTarget.removeEventListener('click', cb);\r\n            frame.classList.remove('modal--active');\r\n        }\r\n    };\r\n    frame.querySelector('p').innerHTML = template;\r\n    //show frame;\r\n    frame.classList.add('modal--active');\r\n    frame.addEventListener('click', cb);\r\n}\r\nexports.doAlert = doAlert;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Music = void 0;\r\nvar three_1 = require(\"three\");\r\nvar CSS3DRenderer_1 = require(\"three/examples/jsm/renderers/CSS3DRenderer\");\r\nvar function_1 = require(\"./lib/function\");\r\nvar Music = /** @class */ (function () {\r\n    function Music(base) {\r\n        this.base = base;\r\n        this.offset = 1.7;\r\n        this.pos = new three_1.Vector3(this.offset, 0, 0);\r\n        this.normal = new three_1.Vector3(1, 0, 0);\r\n        this.cNormal = new three_1.Vector3();\r\n        this.cPos = new three_1.Vector3();\r\n        this.m4 = new three_1.Matrix4();\r\n        this.setElement();\r\n    }\r\n    Music.prototype.setElement = function () {\r\n        this.element = this.base.domBundle.querySelector('#music');\r\n        this.object = new CSS3DRenderer_1.CSS3DObject(this.element);\r\n        this.object.position.set(this.offset, 0, 0);\r\n        this.object.rotation.y = Math.PI / 2;\r\n        this.object.scale.set(1 / 160, 1 / 160, 1);\r\n    };\r\n    Music.prototype.update = function () {\r\n        (0, function_1.updateOcclude)(this);\r\n    };\r\n    return Music;\r\n}());\r\nexports.Music = Music;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SpaceInvader = void 0;\r\nvar three_1 = require(\"three\");\r\nvar CSS3DRenderer_1 = require(\"three/examples/jsm/renderers/CSS3DRenderer\");\r\nvar function_1 = require(\"./lib/function\");\r\nvar SpaceInvader = /** @class */ (function () {\r\n    function SpaceInvader(base) {\r\n        this.base = base;\r\n        this.offset = 1.7;\r\n        this.pos = new three_1.Vector3(0, 0, -this.offset);\r\n        this.normal = new three_1.Vector3(0, 0, -1);\r\n        this.cNormal = new three_1.Vector3();\r\n        this.cPos = new three_1.Vector3();\r\n        this.m4 = new three_1.Matrix4();\r\n        this.setElement();\r\n    }\r\n    SpaceInvader.prototype.setElement = function () {\r\n        this.element = this.base.domBundle.querySelector('#space-invader');\r\n        this.object = new CSS3DRenderer_1.CSS3DObject(this.element);\r\n        this.object.position.set(0, 0, -this.offset);\r\n        this.object.rotation.y = -Math.PI;\r\n        this.object.scale.set(1 / 160, 1 / 160, 1);\r\n    };\r\n    SpaceInvader.prototype.update = function () {\r\n        (0, function_1.updateOcclude)(this);\r\n    };\r\n    return SpaceInvader;\r\n}());\r\nexports.SpaceInvader = SpaceInvader;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar base_1 = require(\"./class/base\");\r\nvar socket_io_client_1 = require(\"socket.io-client\");\r\nvar lodash_1 = require(\"lodash\");\r\nvar function_1 = require(\"./dom/lib/function\");\r\nvar service_1 = require(\"./dom/lib/service\");\r\nvar Main = /** @class */ (function (_super) {\r\n    __extends(Main, _super);\r\n    // private path = 'http://192.168.1.101:5500';\r\n    function Main(canvas, domCanvas, domBundle) {\r\n        var _this = _super.call(this, canvas, domCanvas, domBundle) || this;\r\n        _this.wrapper = document.querySelector('#wrapper');\r\n        _this.chatBlock = document.querySelector('#chat-block');\r\n        _this.rotationLock = _this.chatBlock.querySelector('#rotation-lock');\r\n        _this.chatBlockActive = false;\r\n        _this.path = 'https://3d-cube-chat.fly.dev';\r\n        _this.initChatUI();\r\n        return _this;\r\n    }\r\n    Main.prototype.toggleRotationLockFromUI = function () {\r\n        var status = this.getRotationLockStatus();\r\n        if (status) {\r\n            this.rotationLock.classList.remove('chat-block__rotation-lock--active');\r\n        }\r\n        else {\r\n            this.rotationLock.classList.add('chat-block__rotation-lock--active');\r\n        }\r\n        this.setRotationLock(!status);\r\n    };\r\n    Main.prototype.setRotationLockFromUI = function (status) {\r\n        if (status) {\r\n            this.rotationLock.classList.add('chat-block__rotation-lock--active');\r\n        }\r\n        else {\r\n            this.rotationLock.classList.remove('chat-block__rotation-lock--active');\r\n        }\r\n        this.setRotationLock(status);\r\n    };\r\n    Main.prototype.initChatUI = function () {\r\n        var _this = this;\r\n        var toggler = this.chatBlock.querySelector('#chat-block-toggler');\r\n        var loginBtn = this.chatBlock.querySelector('#login-button');\r\n        var sendBtn = this.chatBlock.querySelector('#send-message-button');\r\n        var logoutBtn = this.chatBlock.querySelector('#logout-button');\r\n        var panelToggle = function () {\r\n            var showTarget;\r\n            if (_this.chatBlockActive) {\r\n                //準備關閉側選單\r\n                _this.wrapper.classList.remove('wrapper--active');\r\n                showTarget = _this.getLoginStatus() ? 'chatMainInner' : 'loginGuide';\r\n                _this.setRotationLockFromUI(false);\r\n            }\r\n            else {\r\n                //準備開啟側選單\r\n                _this.wrapper.classList.add('wrapper--active');\r\n                showTarget = _this.getLoginStatus() ? 'guestList' : 'loginGuide';\r\n                _this.setRotationLockFromUI(true);\r\n                _this.playground.showChat();\r\n            }\r\n            _this.playground.domCube.chat.showScreen(showTarget);\r\n            _this.chatBlockActive = !_this.chatBlockActive;\r\n        };\r\n        var panelSet = function (status) {\r\n            var showTarget;\r\n            if (status == true) {\r\n                //準備開啟側選單\r\n                _this.wrapper.classList.add('wrapper--active');\r\n                showTarget = _this.getLoginStatus() ? 'guestList' : 'loginGuide';\r\n                if (_this.getLoginStatus()) {\r\n                    _this.setRotationLockFromUI(true);\r\n                }\r\n                _this.playground.showChat();\r\n            }\r\n            else {\r\n                //準備關閉側選單\r\n                _this.wrapper.classList.remove('wrapper--active');\r\n                showTarget = _this.getLoginStatus() ? 'chatMainInner' : 'loginGuide';\r\n                _this.setRotationLockFromUI(false);\r\n            }\r\n            _this.playground.domCube.chat.showScreen(showTarget);\r\n            _this.chatBlockActive = status;\r\n        };\r\n        toggler.addEventListener('click', panelToggle);\r\n        this.playground.on('ready', function () {\r\n            _this.playground.domCube.chat.showScreen('loginGuide');\r\n            _this.playground.domCube.chat.on('cube-login-button-click', function () {\r\n                _this.setRotationLockFromUI(true);\r\n                panelSet(true);\r\n            });\r\n        });\r\n        this.rotationLock.addEventListener('click', this.toggleRotationLockFromUI.bind(this));\r\n        loginBtn.addEventListener('click', function () {\r\n            _this.myName = (0, lodash_1.trim)(_this.chatBlock.querySelector('#login-name').value);\r\n            if (_this.myName) {\r\n                /*發送事件*/\r\n                _this.socket = (0, socket_io_client_1.io)(_this.path);\r\n                _this.initChatSocket();\r\n                _this.socket.emit('login', { username: _this.myName });\r\n            }\r\n            else {\r\n                (0, service_1.doAlert)('Please enter a name :)');\r\n            }\r\n        });\r\n        sendBtn.addEventListener('click', function () {\r\n            _this.sendMessage();\r\n        });\r\n        logoutBtn.addEventListener('click', function () { return __awaiter(_this, void 0, void 0, function () {\r\n            var leave;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, (0, service_1.doConfirm)('Are you sure you want to leave the chat?')];\r\n                    case 1:\r\n                        leave = _a.sent();\r\n                        if (leave) {\r\n                            /*觸發 logout 事件*/\r\n                            this.socket.emit('logout', { username: this.myName });\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); });\r\n        document.addEventListener('keydown', function (evt) {\r\n            if (evt.keyCode == 13) {\r\n                _this.sendMessage();\r\n            }\r\n        });\r\n    };\r\n    Main.prototype.initChatSocket = function () {\r\n        var _this = this;\r\n        /*登入成功*/\r\n        this.socket.on('loginSuccess', function (data) {\r\n            if (data.username === _this.myName) {\r\n                _this.checkIn(data);\r\n            }\r\n            else {\r\n                (0, service_1.doAlert)('Wrong username:( Please try again!');\r\n            }\r\n        });\r\n        /*登入失敗*/\r\n        this.socket.on('loginFail', function () {\r\n            (0, service_1.doAlert)('Duplicate name already exists :(');\r\n        });\r\n        /*加入聊天室提示*/\r\n        this.socket.on('add', function (data) {\r\n            var html = \"<p>\".concat(data.username, \" \\u52A0\\u5165\\u804A\\u5929\\u5BA4</p>\");\r\n            // $('.chat-con').append(html);\r\n            _this.playground.domCube.chat.setGuestNumber(data.userCount);\r\n            _this.playground.domCube.chat.refreshGuestList(data === null || data === void 0 ? void 0 : data.users);\r\n        });\r\n        //離開成功\r\n        this.socket.on('leaveSuccess', function () {\r\n            _this.checkOut();\r\n        });\r\n        //退出提示\r\n        this.socket.on('leave', function (data) {\r\n            if (data.username != null) {\r\n                _this.playground.domCube.chat.refreshGuestList(data === null || data === void 0 ? void 0 : data.users);\r\n                var html = \"<p>\".concat(data.username, \" \\u9000\\u51FA\\u804A\\u5929\\u5BA4</p>\");\r\n                // $('.chat-con').append(html);\r\n                _this.playground.domCube.chat.setGuestNumber(data.userCount);\r\n            }\r\n        });\r\n        //收到訊息\r\n        this.socket.on('receiveMessage', function (data) {\r\n            _this.showMessage(data);\r\n        });\r\n    };\r\n    Main.prototype.checkIn = function (data) {\r\n        var loginWrapper = this.chatBlock.querySelector('#login');\r\n        var userNameEle = this.chatBlock.querySelector('#my-name');\r\n        userNameEle.innerHTML = data.username;\r\n        loginWrapper.classList.add('login--logined');\r\n        this.setRotationLockFromUI(true);\r\n        this.setLoginStatus(true);\r\n        this.playground.showChat();\r\n    };\r\n    Main.prototype.checkOut = function () {\r\n        var loginWrapper = this.chatBlock.querySelector('#login');\r\n        loginWrapper.classList.remove('login--logined');\r\n        this.playground.domCube.chat.showScreen('loginGuide');\r\n        this.chatBlock.querySelector('#chat-main').innerHTML = '';\r\n        this.setLoginStatus(false);\r\n    };\r\n    Main.prototype.sendMessage = function () {\r\n        var inputEle = this.chatBlock.querySelector('#message-input');\r\n        var message = inputEle.value;\r\n        inputEle.value = '';\r\n        if (message) {\r\n            /*觸發 sendMessage 事件*/\r\n            this.socket.emit('sendMessage', { username: this.myName, message: message });\r\n        }\r\n    };\r\n    Main.prototype.showMessage = function (data) {\r\n        var html;\r\n        if (data.username === this.myName) {\r\n            html = \"<div class=\\\"chat-main__chat \\\">\\n                        <div class=\\\"chat-main__bubble-name\\\">You</div>\\n                        <div class=\\\"chat-main__bubble\\\">\".concat(data.message, \"</div>\\n                    </div>\\n                    \");\r\n        }\r\n        else {\r\n            html = \"<div class=\\\"chat-main__chat chat-main__chat--other\\\">\\n                        <div class=\\\"chat-main__bubble-name\\\">\".concat(data.username, \"</div>\\n                        <div class=\\\"chat-main__bubble\\\">\").concat(data.message, \"</div>\\n                    </div>\\n                    \");\r\n        }\r\n        var ele = (0, function_1.createElementFromHTML)(html);\r\n        var containerMain = this.chatBlock.querySelector('#chat-main');\r\n        var containerCube = this.wrapper.querySelector('#chat-main-cube .chat-main__inner#chat-main-inner');\r\n        containerMain.appendChild(ele);\r\n        containerCube.appendChild(ele.cloneNode(true));\r\n        containerMain.parentElement.scrollTop = containerMain.scrollHeight;\r\n        containerCube.scrollTop = containerCube.scrollHeight;\r\n    };\r\n    return Main;\r\n}(base_1.Base));\r\n(function () {\r\n    var cvs = document.querySelector('#canvas');\r\n    var dcvs = document.querySelector('#dom-canvas');\r\n    var domBundle = document.querySelector('#dom-bundle');\r\n    var instance = new Main(cvs, dcvs, domBundle);\r\n})();\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Cube = void 0;\r\nvar gsap_1 = require(\"gsap\");\r\nvar three_1 = require(\"three\");\r\nvar function_1 = require(\"../dom/lib/function\");\r\nvar Cube = /** @class */ (function () {\r\n    function Cube(base) {\r\n        this.base = base;\r\n        this.setModel();\r\n    }\r\n    Cube.prototype.createRoundedBoxGeo = function (width, height, depth, radius0, smoothness) {\r\n        var shape = new three_1.Shape();\r\n        var eps = 0.00001;\r\n        var radius = radius0 - eps;\r\n        var faceRadius = 0.25;\r\n        shape.absarc(eps, eps, faceRadius, -Math.PI / 2, -Math.PI, true);\r\n        shape.absarc(eps, height - radius * 2, faceRadius, Math.PI, Math.PI / 2, true);\r\n        shape.absarc(width - radius * 2, height - radius * 2, faceRadius, Math.PI / 2, 0, true);\r\n        shape.absarc(width - radius * 2, eps, faceRadius, 0, -Math.PI / 2, true);\r\n        var geometry = new three_1.ExtrudeGeometry(shape, {\r\n            depth: depth - radius0,\r\n            bevelEnabled: true,\r\n            bevelSegments: smoothness * 2,\r\n            steps: 1,\r\n            bevelSize: radius,\r\n            bevelThickness: radius0,\r\n            curveSegments: smoothness\r\n        });\r\n        geometry.center();\r\n        return geometry;\r\n    };\r\n    Cube.prototype.setModel = function () {\r\n        var _a, _b;\r\n        var geo = this.createRoundedBoxGeo(3, 3, 3, 0.4, 20);\r\n        var mat = new three_1.MeshMatcapMaterial({\r\n            matcap: this.base.resources.cubeMatcap\r\n        });\r\n        this.group = new three_1.Group();\r\n        this.mesh = new three_1.Mesh(geo, mat);\r\n        (_a = this.mesh.scale).set.apply(_a, function_1.cubeLikeConfig.initialScale);\r\n        (_b = this.mesh.rotation).set.apply(_b, function_1.cubeLikeConfig.initialRotation);\r\n        this.group.add(this.mesh);\r\n        this.base.scene.add(this.group);\r\n        this.doAnimation();\r\n    };\r\n    Cube.prototype.doAnimation = function () {\r\n        gsap_1.default.to(this.mesh.rotation, function_1.cubeLikeConfig.startAnimationInnerRotationConfig);\r\n        gsap_1.default.to(this.mesh.scale, function_1.cubeLikeConfig.startAnimationInnerScalingConfig);\r\n    };\r\n    Cube.prototype.showChat = function () {\r\n        gsap_1.default.to(this.mesh.rotation, function_1.cubeLikeConfig.showChatAnimationInnerRotationConfig);\r\n        var angle = (0, function_1.getTargetAngle)(this.group.rotation.y);\r\n        gsap_1.default.to(this.group.rotation, {\r\n            x: 0,\r\n            y: angle,\r\n            z: 0,\r\n            duration: 2\r\n        });\r\n        gsap_1.default.to(this.base.camera.instance.position, {\r\n            x: this.base.camera.bestPoint.x,\r\n            y: this.base.camera.bestPoint.y,\r\n            z: this.base.camera.bestPoint.z,\r\n            duration: 4,\r\n        });\r\n    };\r\n    Cube.prototype.update = function (delta) {\r\n        if (!this.base.touched && !this.base.getRotationLockStatus()) {\r\n            this.group.rotation.y += delta / function_1.cubeLikeConfig.updateParameter;\r\n        }\r\n    };\r\n    return Cube;\r\n}());\r\nexports.Cube = Cube;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./cube\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getResources = void 0;\r\nvar textures_1 = require(\"./textures\");\r\nvar three_1 = require(\"three\");\r\nvar textureLoader = new three_1.TextureLoader();\r\nvar cubeTextureLoader = new three_1.CubeTextureLoader();\r\nvar getTexture = function (source) {\r\n    var prm = new Promise(function (res, rej) {\r\n        textureLoader.load(source.path, function (texture) {\r\n            res({\r\n                name: source.name,\r\n                content: texture\r\n            });\r\n        }, null, rej);\r\n    });\r\n    return prm;\r\n};\r\nvar getCubeTexture = function (source) {\r\n    var prm = new Promise(function (res, rej) {\r\n        cubeTextureLoader.load(source.paths, function (texture) {\r\n            res({\r\n                name: source.name,\r\n                content: texture\r\n            });\r\n        }, null, function (error) { console.log(error); });\r\n    });\r\n    return prm;\r\n};\r\nvar getResources = function () {\r\n    var promiseArr = [];\r\n    for (var _i = 0, textureSources_1 = textures_1.textureSources; _i < textureSources_1.length; _i++) {\r\n        var textureSource = textureSources_1[_i];\r\n        switch (textureSource.type) {\r\n            case 'cubeTexture':\r\n                promiseArr.push(getCubeTexture(textureSource));\r\n                break;\r\n            case 'texture':\r\n                promiseArr.push(getTexture(textureSource));\r\n                break;\r\n        }\r\n    }\r\n    return Promise.all(promiseArr).then(function (values) {\r\n        var result = {};\r\n        values.forEach(function (sourceObj) {\r\n            result[sourceObj.name] = sourceObj.content;\r\n        });\r\n        return result;\r\n    });\r\n};\r\nexports.getResources = getResources;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.textureSources = void 0;\r\nexports.textureSources = [\r\n    {\r\n        name: 'gradientCubeTexture',\r\n        type: 'cubeTexture',\r\n        paths: [\r\n            './assets/images/cubemap/gs-gradient/px.png',\r\n            './assets/images/cubemap/gs-gradient/nx.png',\r\n            './assets/images/cubemap/gs-gradient/py.png',\r\n            './assets/images/cubemap/gs-gradient/ny.png',\r\n            './assets/images/cubemap/gs-gradient/pz.png',\r\n            './assets/images/cubemap/gs-gradient/nz.png'\r\n        ]\r\n    },\r\n    {\r\n        name: 'cubeMatcap',\r\n        type: 'texture',\r\n        path: './assets/images/matcap/BlackRough.png'\r\n    }\r\n];\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventEmitter = void 0;\r\nvar EventEmitter = /** @class */ (function () {\r\n    function EventEmitter() {\r\n        this.callbacks = {};\r\n        this.callbacks = {};\r\n        this.callbacks.base = {};\r\n    }\r\n    EventEmitter.prototype.on = function (_names, callback) {\r\n        var _this = this;\r\n        // Errors\r\n        if (typeof _names === 'undefined' || _names === '') {\r\n            console.warn('wrong names');\r\n            return false;\r\n        }\r\n        if (typeof callback === 'undefined') {\r\n            console.warn('wrong callback');\r\n            return false;\r\n        }\r\n        // Resolve names\r\n        var names = this.resolveNames(_names);\r\n        // Each name\r\n        names.forEach(function (_name) {\r\n            // Resolve name\r\n            var name = _this.resolveName(_name);\r\n            // Create namespace if not exist\r\n            if (!(_this.callbacks[name.namespace] instanceof Object))\r\n                _this.callbacks[name.namespace] = {};\r\n            // Create callback if not exist\r\n            if (!(_this.callbacks[name.namespace][name.value] instanceof Array))\r\n                _this.callbacks[name.namespace][name.value] = [];\r\n            // Add callback\r\n            _this.callbacks[name.namespace][name.value].push(callback);\r\n        });\r\n        return this;\r\n    };\r\n    EventEmitter.prototype.off = function (_names) {\r\n        var _this = this;\r\n        // Errors\r\n        if (typeof _names === 'undefined' || _names === '') {\r\n            console.warn('wrong name');\r\n            return false;\r\n        }\r\n        // Resolve names\r\n        var names = this.resolveNames(_names);\r\n        // Each name\r\n        names.forEach(function (_name) {\r\n            // Resolve name\r\n            var name = _this.resolveName(_name);\r\n            // Remove namespace\r\n            if (name.namespace !== 'base' && name.value === '') {\r\n                delete _this.callbacks[name.namespace];\r\n            }\r\n            // Remove specific callback in namespace\r\n            else {\r\n                // Default\r\n                if (name.namespace === 'base') {\r\n                    // Try to remove from each namespace\r\n                    for (var namespace in _this.callbacks) {\r\n                        if (_this.callbacks[namespace] instanceof Object &&\r\n                            _this.callbacks[namespace][name.value] instanceof Array) {\r\n                            delete _this.callbacks[namespace][name.value];\r\n                            // Remove namespace if empty\r\n                            if (Object.keys(_this.callbacks[namespace]).length === 0)\r\n                                delete _this.callbacks[namespace];\r\n                        }\r\n                    }\r\n                }\r\n                // Specified namespace\r\n                else if (_this.callbacks[name.namespace] instanceof Object &&\r\n                    _this.callbacks[name.namespace][name.value] instanceof Array) {\r\n                    delete _this.callbacks[name.namespace][name.value];\r\n                    // Remove namespace if empty\r\n                    if (Object.keys(_this.callbacks[name.namespace]).length === 0)\r\n                        delete _this.callbacks[name.namespace];\r\n                }\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    EventEmitter.prototype.trigger = function (_name, _args) {\r\n        var _this = this;\r\n        // Errors\r\n        if (typeof _name === 'undefined' || _name === '') {\r\n            console.warn('wrong name');\r\n            return false;\r\n        }\r\n        var finalResult = null;\r\n        var result = null;\r\n        // Default args\r\n        var args = !(_args instanceof Array) ? [] : _args;\r\n        // Resolve names (should on have one event)\r\n        var nameArray = this.resolveNames(_name);\r\n        // Resolve name\r\n        var name = this.resolveName(nameArray[0]);\r\n        // Default namespace\r\n        if (name.namespace === 'base') {\r\n            // Try to find callback in each namespace\r\n            for (var namespace in this.callbacks) {\r\n                if (this.callbacks[namespace] instanceof Object &&\r\n                    this.callbacks[namespace][name.value] instanceof Array) {\r\n                    this.callbacks[namespace][name.value].forEach(function (callback) {\r\n                        result = callback.apply(_this, args);\r\n                        if (typeof finalResult === 'undefined') {\r\n                            finalResult = result;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        // Specified namespace\r\n        else if (this.callbacks[name.namespace] instanceof Object) {\r\n            if (name.value === '') {\r\n                console.warn('wrong name');\r\n                return this;\r\n            }\r\n            this.callbacks[name.namespace][name.value].forEach(function (callback) {\r\n                result = callback.apply(_this, args);\r\n                if (typeof finalResult === 'undefined')\r\n                    finalResult = result;\r\n            });\r\n        }\r\n        return finalResult;\r\n    };\r\n    EventEmitter.prototype.resolveNames = function (_names) {\r\n        var names = _names;\r\n        names = names.replace(/[^a-zA-Z0-9 ,/.]/g, '');\r\n        names = names.replace(/[,/]+/g, ' ');\r\n        names = names.split(' ');\r\n        return names;\r\n    };\r\n    EventEmitter.prototype.resolveName = function (name) {\r\n        var newName = {};\r\n        var parts = name.split('.');\r\n        newName.original = name;\r\n        newName.value = parts[0];\r\n        newName.namespace = 'base'; // Base namespace\r\n        // Specified namespace\r\n        if (parts.length > 1 && parts[1] !== '') {\r\n            newName.namespace = parts[1];\r\n        }\r\n        return newName;\r\n    };\r\n    return EventEmitter;\r\n}());\r\nexports.EventEmitter = EventEmitter;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./event-emitter\"), exports);\r\n__exportStar(require(\"./ticker\"), exports);\r\n__exportStar(require(\"./sizer\"), exports);\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Sizer = void 0;\r\nvar event_emitter_1 = require(\"./event-emitter\");\r\nvar Sizer = /** @class */ (function (_super) {\r\n    __extends(Sizer, _super);\r\n    function Sizer(canvas) {\r\n        var _this = _super.call(this) || this;\r\n        _this.canvas = canvas;\r\n        _this.pixelRatio = Math.min(window.devicePixelRatio, 2);\r\n        _this.initSizingMechanic();\r\n        return _this;\r\n    }\r\n    Sizer.prototype.initSizingMechanic = function () {\r\n        this.sizing();\r\n        window.addEventListener('resize', this.sizing.bind(this));\r\n    };\r\n    Sizer.prototype.sizing = function () {\r\n        var rect = this.canvas.parentElement.getBoundingClientRect();\r\n        this.width = rect.width;\r\n        this.height = rect.height;\r\n        this.trigger('resize', [this.width, this.height]);\r\n    };\r\n    return Sizer;\r\n}(event_emitter_1.EventEmitter));\r\nexports.Sizer = Sizer;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Ticker = void 0;\r\nvar event_emitter_1 = require(\"./event-emitter\");\r\nvar three_1 = require(\"three\");\r\nvar Ticker = /** @class */ (function (_super) {\r\n    __extends(Ticker, _super);\r\n    function Ticker() {\r\n        var _this = _super.call(this) || this;\r\n        _this.clock = new three_1.Clock();\r\n        window.requestAnimationFrame(function () {\r\n            _this.tick();\r\n        });\r\n        return _this;\r\n    }\r\n    Ticker.prototype.tick = function () {\r\n        var _this = this;\r\n        this.trigger('tick', [this.clock]);\r\n        window.requestAnimationFrame(function () {\r\n            _this.tick();\r\n        });\r\n    };\r\n    return Ticker;\r\n}(event_emitter_1.EventEmitter));\r\nexports.Ticker = Ticker;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) var result = runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkwebpack_playground\"] = self[\"webpackChunkwebpack_playground\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\n__webpack_require__.O(undefined, [736], () => (__webpack_require__(7310)))\n__webpack_require__.O(undefined, [736], () => (__webpack_require__(2367)))\n__webpack_require__.O(undefined, [736], () => (__webpack_require__(142)))\nvar __webpack_exports__ = __webpack_require__.O(undefined, [736], () => (__webpack_require__(1163)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}